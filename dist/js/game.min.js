!function(e,t,i){function s(){function s(){requestAnimationFrame(s),o.move(),n.render(r)}var n=t.autoDetectRenderer(800,600,{backgroundColor:1087931,antialias:!0,autoResize:!0});e.game.renderer=n,n.view.style.display="block",n.view.style.margin="auto",i.body.appendChild(n.view);var r=new t.Container,o=new e.game.Bunny(r,200,200);r.addChild(o.getSprite()),s()}e.game={},i.addEventListener("DOMContentLoaded",s,!1)}(window,window.PIXI,document),function(e){e.keyboard=function(t){function i(e){switch(e){case"SPACE":return 32;case"LEFT":return 37;case"UP":return 38;case"RIGHT":return 39;case"DOWN":return 40;default:return e.toUpperCase().charCodeAt(0)}}var s={};return s.codes=_.isArray(t)?t:[t],s.codes=s.codes.map(function(e){return _.isString(e)?i(e):e}),s.isDown=!1,s.isUp=!0,s.press=void 0,s.release=void 0,s.downHandler=function(e){-1!==s.codes.indexOf(e.keyCode)&&(s.isUp&&s.press&&s.press(),s.isDown=!0,s.isUp=!1),e.preventDefault()},s.upHandler=function(e){-1!==s.codes.indexOf(e.keyCode)&&(s.isDown&&s.release&&s.release(),s.isDown=!1,s.isUp=!0),e.preventDefault()},e.addEventListener("keydown",s.downHandler.bind(s),!1),e.addEventListener("keyup",s.upHandler.bind(s),!1),s}}(window),function(e,t){var i=function(e,i,s,n){var r=t.Texture.fromImage("/assets/heart.png");this.sprite=new t.Sprite(r),this.speed=4,this.sprite.interactive=!0,this.sprite.position.set(i,s)};i.prototype=Object.create({}),e.game.Bullet=i}(window,window.PIXI),function(e,t,i,s,n,r){var o=null,a=n.create(),d=function(i,r,d){var h=t.Texture.fromImage("/assets/bunny.png");this.sprite=new t.Sprite(h),this.speed=4,this.sprite.interactive=!0,this.vx=0,this.bullets=[],this.vy=0,this.stage=i,this.sprite.background="#ccc",this.sprite.anchor.x=.5,this.sprite.anchor.y=.5,this.sprite.position.set(r,d),this.sprite.mousemove=function(e){o=n.fromValues(e.data.global.x,e.data.global.y);var t=n.fromValues(this.sprite.x,this.sprite.y),i=n.create();n.subtract(i,t,o),n.normalize(a,i),this.sprite.rotation=s.atan2(i[1],i[0]),this.sprite.rotation+=s.atan2(1,0)}.bind(this),e.game.renderer.view.addEventListener("click",function(e){this.shoot()}.bind(this)),this.initKeyboard()};d.prototype=Object.create({getSprite:function(){return this.sprite},move:function(){this.sprite.x+this.vx>0&&(this.sprite.x+=this.vx),this.sprite.y+this.vy>0&&(this.sprite.y+=this.vy)},shoot:function(){this.bullets.push(new e.game.Bullet(this.stage,this.sprite.x,this.sprite.y,a))},initKeyboard:function(){var e=i(["a","LEFT"]),t=i(["w","UP"]),s=i(["d","RIGHT"]),n=i(["s","DOWN"]);e.press=function(){this.vx=-this.speed}.bind(this),e.release=function(){s.isDown||(this.vx=0)}.bind(this),s.press=function(){this.vx=this.speed}.bind(this),s.release=function(){e.isDown||(this.vx=0)}.bind(this),t.press=function(){this.vy=-this.speed}.bind(this),t.release=function(){n.isDown||(this.vy=0)}.bind(this),n.press=function(){this.vy=this.speed}.bind(this),n.release=function(){t.isDown||(this.vy=0)}.bind(this)}}),e.game.Bunny=d}(window,window.PIXI,window.keyboard,window.Math,window.vec2);